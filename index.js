let words = ["comme", "je", "son", "que", "√©tait", "pour", "sur", "sont", "avec", "ils", "√™tre", "un", "avoir", "ce", "par", "chaud", "mot", "mais", "que", "certains", "est", "il", "vous", "ou", "eu", "la", "de", "√†", "et", "un", "dans", "nous", "bo√Æte", "dehors", "autre", "√©taient", "qui", "faire", "leur", "temps", "si", "volont√©", "comment", "dit", "un", "chaque", "dire", "ne", "ensemble", "trois", "vouloir", "air", "bien", "aussi", "jouer", "petit", "fin", "mettre", "maison", "lire", "main", "port", "grand", "√©peler", "ajouter", "m√™me", "terre", "ici", "grand", "haut", "tel", "suivre", "acte", "pourquoi", "interroger", "hommes", "changement", "lumi√®re", "genre", "de", "besoin", "maison", "image", "essayer", "nous", "encore", "animal", "point", "m√®re", "monde", "pr√®s", "construire", "soi", "terre", "p√®re", "tout", "nouveau", "travail", "partie", "prendre", "obtenir", "lieu", "fabriqu√©", "vivre", "o√π", "apr√®s", "arri√®re", "peu", "seulement", "tour", "homme", "ann√©e", "venu", "montrer", "tous", "bon", "moi", "donner", "notre", "sous", "nom", "tr√®s", "par", "juste", "forme", "phrase", "grand", "penser", "dire", "aider", "faible", "ligne", "diff√©rer", "tour", "cause", "beaucoup", "signifier", "avant", "d√©m√©nagement", "droit", "gar√ßon", "vieux", "trop", "m√™me", "elle", "tous", "l√†", "quand", "jusqu‚Äô√†", "utiliser", "votre", "mani√®re", "sur", "beaucoup", "puis", "les", "√©crire", "voudrais", "comme", "si", "ces", "son", "long", "faire", "chose", "voir", "lui", "deux", "a", "regarder", "plus", "jour", "pourrait", "aller", "venir", "fait", "nombre", "son", "aucun", "plus", "personnes", "ma", "sur", "savoir", "eau", "que", "appel", "premi√®re", "qui", "peut", "vers", "c√¥t√©", "√©t√©", "maintenant", "trouver", "t√™te", "supporter", "propre", "page", "devrait", "pays", "trouv√©", "r√©ponse", "√©cole", "cro√Ætre", "√©tude", "encore", "apprendre", "usine", "couvercle", "nourriture", "soleil", "quatre", "entre", "√©tat", "garder", "≈ìil", "jamais", "dernier", "laisser", "pens√©e", "ville", "arbre", "traverser", "ferme", "dur", "d√©but", "puissance", "histoire", "scie", "loin", "mer", "tirer", "gauche", "tard", "courir", "tandis", "presse", "proche", "nuit", "r√©el", "vie", "peu", "nord", "livre", "porter", "science", "manger", "chambre", "ami", "id√©e", "poisson", "montagne", "fois", "base", "entendre", "cheval", "coupe", "s√ªr", "regarder", "couleur", "face", "bois", "principal", "ouvert", "para√Ætre", "ensemble", "suivant", "blanc", "enfants", "commencer", "eu", "marcher", "exemple", "facilit√©", "papier", "groupe", "toujours", "musique", "ceux", "marque", "souvent", "lettre", "mile", "rivi√®re", "voiture", "pieds", "soins", "deuxi√®me", "assez", "plaine", "fille", "habituel", "jeune", "pr√™t", "au-dessus", "jamais", "rouge", "liste", "bien", "sentir", "parler", "oiseau", "bient√¥t", "corps", "chien", "famille", "direct", "pose", "laisser", "chanson", "mesurer", "porte", "produit", "noir", "court", "chiffre", "classe", "vent", "question", "arriver", "compl√®te", "navire", "zone", "moiti√©", "rock", "ordre", "feu", "sud", "probl√®me", "pi√®ce", "dit", "savait", "passer", "depuis", "haut", "ensemble", "roi", "rue", "pouce", "multiplier", "rien", "cours", "rester", "roue", "plein", "force", "bleu", "objet", "d√©cider", "surface", "profond", "lune", "√Æle", "pied", "syst√®me", "occup√©", "test", "record", "bateau", "commun", "or", "possible", "plan", "place", "sec", "se", "rire", "mille", "il", "ran", "v√©rifier", "jeu", "forme", "assimiler", "chaud", "manquer", "apport√©", "chaleur", "neige", "pneu", "apporter", "oui", "lointain", "remplir", "est", "peindre", "langue", "entre", "unit√©", "puissance", "ville", "fin", "certain", "voler", "tomber", "conduire", "cri", "sombre", "machine", "note", "patienter", "plan", "figure", "√©toile", "bo√Æte", "nom", "domaine", "reste", "correct", "capable", "livre", "termin√©", "beaut√©", "entra√Ænement", "r√©sist√©", "contenir", "avant", "enseigner", "semaine", "finale", "donn√©", "vert", "oh", "rapide", "d√©velopper", "oc√©an", "chaud", "gratuit", "minute", "fort", "sp√©cial", "esprit", "derri√®re", "clair", "queue", "produire", "fait", "espace", "entendu", "meilleur", "heure", "mieux", "vrai", "pendant", "cent", "cinq", "rappeler", "√©tape", "t√¥t", "tenir", "ouest", "sol", "int√©r√™t", "atteindre", "rapide", "verbe", "chanter", "√©couter", "six", "table", "Voyage", "moins", "matin", "dix", "simple", "plusieurs", "voyelle", "vers", "guerre", "poser", "contre", "mod√®le", "lent", "centre", "amour", "personne", "argent", "servir", "appara√Ætre", "route", "carte", "pluie", "r√®gle", "gouverner", "tirer", "froid", "avis", "voix", "√©nergie", "chasse", "probable", "lit", "fr√®re", "≈ìuf", "tour", "cellule", "croire", "peut-√™tre", "choisir", "soudain", "compter", "carr√©", "raison", "longueur", "repr√©senter", "art", "sujet", "r√©gion", "taille", "varier", "r√©gler", "parler", "poids", "g√©n√©ral", "glace", "question", "cercle", "paire", "inclure", "fracture", "syllabe", "feutre", "grandiose", "balle", "encore", "vague", "tomber", "pr√©sent", "lourd", "danse", "moteur", "position", "bras", "large", "voile", "mat√©riel", "fraction", "for√™t", "course", "fen√™tre", "magasin", "√©t√©", "train", "sommeil", "prouver", "seul", "jambe", "exercice", "mur", "capture", "monture", "souhaiter", "ciel", "conseil", "joie", "hiver", "sat", "√©crit", "sauvage", "instrument", "conserv√©", "verre", "herbe", "vache", "emploi", "bord", "signe", "visite", "pass√©", "doux", "amusement", "clair", "gaz", "temps", "mois", "million", "porter", "finition", "heureux", "espoir", "fleur", "v√™tir", "√©trange", "disparu", "commerce", "m√©lodie", "voyage", "bureau", "recevoir", "rang√©e", "bouche", "exact", "symbole", "mourir", "moins", "difficult√©", "cri", "sauf", "√©crit", "semence", "ton", "joindre", "sugg√©rer", "propre", "pause", "dame", "cour", "augmenter", "mauvais", "coup", "huile", "sang", "toucher", "cent", "m√©langer", "√©quipe", "fil", "co√ªt", "perdu", "brun", "porter", "jardin", "√©gal", "exp√©di√©", "choisir", "d√©bit", "juste", "banque", "recueillir", "sauver", "contr√¥le", "d√©cimal", "oreille", "autre", "cass√©", "cas", "milieu", "tuer", "fils", "lac", "moment", "√©chelle", "fort", "printemps", "observer", "enfant", "droit", "consonne", "nation", "dictionnaire", "lait", "vitesse", "m√©thode", "organe", "payer", "√¢ge", "section", "robe", "nuage", "surprise", "calme", "pierre", "minuscule", "mont√©e", "frais", "conception", "pauvres", "lot", "exp√©rience", "bas", "cl√©", "fer", "unique", "b√¢ton", "plat", "vingt", "peau", "sourire", "pli", "trou", "sauter", "b√©b√©", "huit", "village", "racine", "acheter", "augmenter", "r√©soudre", "m√©tal", "si", "pousser", "sept", "paragraphe", "troisi√®me", "doit", "cheveux", "d√©crire", "cuisinier", "√©tage", "chaque", "r√©sultat", "br√ªler", "colline", "coffre-fort", "chat", "si√®cle", "envisager", "type", "droit", "peu", "c√¥te", "copie", "phrase", "silencieux", "haut", "sable", "sol", "rouleau", "temp√©rature", "doigt", "industrie", "valeur", "lutte", "mensonge", "battre", "exciter", "naturel", "vue", "sens", "capital", "chaise", "danger", "fruit", "riche", "√©pais", "soldat", "processus", "fonctionner", "pratique", "s√©par√©", "difficile", "m√©decin", "prot√©ger", "midi", "r√©colte", "moderne", "√©l√©ment", "frapper", "√©tudiant", "coin", "partie", "alimentation", "dont", "localiser", "anneau", "caract√®re", "insecte", "pris", "p√©riode", "indiquer", "radio", "rayon", "atome", "humain", "histoire", "effet", "√©lectrique", "attendre", "os", "rail", "imaginer", "fournir", "ainsi", "doux", "femme", "capitaine", "deviner", "n√©cessaire", "net", "aile", "cr√©er", "voisin", "lavage", "chauve-souris", "plut√¥t", "foule", "bl√©", "comparer", "po√®me", "cha√Æne", "cloche", "d√©pendre", "viande", "rub", "tube", "c√©l√®bre", "dollar", "courant", "peur", "vue", "mince", "triangle", "plan√®te", "chef", "colonie", "horloge", "mine", "lien", "entrer", "majeur", "frais", "recherche", "envoyer", "jaune", "pistolet", "permettre", "impression", "mort", "place", "d√©sert", "costume", "courant", "ascenseur", "rose", "arriver", "ma√Ætre", "piste", "m√®re", "rivage", "division", "feuille", "substance", "favoriser", "relier", "poste", "passer", "corde", "graisse", "heureux", "original", "part", "station", "papa", "pain", "charger", "propre", "bar", "proposition", "segment", "esclave", "canard", "instant", "march√©", "degr√©", "peupler", "poussin", "cher", "ennemi", "r√©pondre", "boisson", "support", "discours", "nature", "gamme", "vapeur", "mouvement", "chemin", "liquide", "enregistrer", "signifiait", "quotient", "dents", "coquille", "cou", "oxyg√®ne", "sucre", "d√©c√®s", "assez", "comp√©tence", "femmes", "saison", "solution", "aimant", "argent", "merci", "branche", "rencontre", "suffixe", "particuli√®rement", "figue", "peur", "√©norme", "s≈ìur", "acier", "discuter", "avant", "similaire", "guider", "exp√©rience", "score", "pomme", "achet√©", "LED", "pas", "manteau", "masse", "carte", "bande", "corde", "glissement", "gagner", "r√™ver", "soir√©e", "condition", "alimentation", "outil", "total", "odeur", "vall√©e", "ni", "double", "si√®ge", "continuer", "bloc", "graphique", "chapeau", "vendre", "succ√®s", "entreprise", "soustraire", "√©v√©nement", "particulier", "accord", "baignade", "terme", "oppos√©", "femme", "chaussure", "√©paule", "propagation", "organiser", "camp", "inventer", "coton", "n√©", "d√©terminer", "litre", "neuf", "camion", "bruit", "niveau", "chance", "recueillir", "boutique", "tron√ßon", "jeter", "√©clat", "propri√©t√©", "colonne", "mol√©cule", "s√©lectionner", "mal", "gris", "r√©p√©tition", "exiger", "large", "pr√©parer", "sel", "nez", "pluriel", "col√®re", "revendication", "continent"]
let index = 0;
let selectedWords = [];
let score = 0;

function generateArray() {
    for (let i = 0; i < 300; i++) {
        selectedWords[i] = words[Math.floor(Math.random()*words.length)];
    }
}

function displayRandomWords() {
    for (let i = 0; i < 100; i++) {
        let div = document.getElementById('displayWords')
        let newDiv = document.createElement("span");
        newDiv.innerHTML = selectedWords[i]
        let currentDiv = document.getElementById('displayWords');
        document.body.insertBefore(newDiv, currentDiv);
        div.appendChild(newDiv)
    }
}
function validateWord() {
    document.getElementById('wordInput').onkeydown=function(event){
        if(event.keyCode===32 || event.keyCode===13){
            document.getElementById('wordInput').innerHTML = document.getElementById('wordInput').value
            getWordInput()
            trackWord(index)
            updateScore()
            index++;
            return false;
        }
    }
}
function clearInput() {
    document.getElementById('wordInput').value = ""
}

function getWordInput() {
    clearInput()
}

function trackWord(index) {
    let spans = document.getElementById('displayWords').getElementsByTagName('span');
    let currentWord = spans.item(index);
    let previous = spans.item(index+1);
    let width = currentWord.clientWidth;
    previous.style.color = "#5efaff";
    previous.style.fontWeight = "bolder";
    document.getElementById('displayWords').scrollLeft += width + 40;
}

function updateScore() {
    document.querySelector("#score").innerHtml = "Score : " + score;
    if (document.getElementById('wordInput').textContent === selectedWords[index]) {
        document.getElementById('wordInput').style.background = "#2f4e21"
        score++;
        console.log(score);
        document.querySelector("#score").innerHTML = "Score : " + score;
    } else {
        document.getElementById('wordInput').style.background = "#571b1b"
    }
    resetBackground()
}

function resetBackground() {
    setTimeout( () => {
        document.getElementById('wordInput').style.background = "black"
        }, 200)
}

function timer() {
    let textarea = document.getElementById("wordInput");
    let timer;
    let seconds = 1000 * 60; //1000 = 1 second in JS
    textarea.addEventListener('keypress', starting)

    function starting() {
        textarea.removeEventListener("keypress", starting);
        if (seconds === 60000)
            timer = setInterval(starting, 1000)
        seconds -= 1000;
        document.getElementById("timer").innerHTML = '0:' + seconds / 1000;
        if (seconds <= 0) {
            clearInterval(timer);
            document.getElementById("score").innerHTML = score + " mots par minute. üëç";
            document.getElementById("timer").innerHTML = "";
            document.getElementById("wordInput").style.disabled = true;
        }
    }
    document.getElementById("timer").innerHTML = "1:00";
}

function setFirstWordStyle() {
    document.getElementById('displayWords').getElementsByTagName('span').item(index).style.color = "#5efaff";
    document.getElementById('displayWords').getElementsByTagName('span').item(index).style.fontWeight = "bolder";
}

// CHECK RESET
document.getElementById('reset').onclick = function() {
    location.reload();
}

window.addEventListener('load', function () {
    generateArray()
    validateWord()
    displayRandomWords()
    setFirstWordStyle()
    resetBackground()
    timer()
});


